(this.webpackJsonpfronted=this.webpackJsonpfronted||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){},461:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(38),o=n.n(i),r=(n(147),n(148),n(149),n(71)),c=n.n(r),l=n(101),d=n(140),u=n(126),m=n(127),p=n(141),j=n(136),h=n(466),f=n(467),b=n(468),g=n(43),O=n(465),x=n(469),v=n(470),I=n(19),y=["key","name","fieldKey"],C=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).goodsCollectionAndApprove=function(e,t){var n={detailForms:e,originatorUserId:sessionStorage.getItem("userId"),textForms:t,deptId:sessionStorage.getItem("deptId")};c()({url:F+"/process/instance",method:"post",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){alert("success")})).catch((function(e){console.log(e)}))},a.getTableRowData=function(){c.a.get(F+"/process/instance").then((function(e){var t={},n=[];e.data.data.map((function(e){t={operationResult:e.operationRecords[0].operationResult,status:e.status};var a={};e.formComponentValues.map((function(e){"\u7269\u54c1\u7528\u9014"===e.name?a.purpose=e.value:"\u7269\u54c1\u660e\u7ec6"===e.name?a.more=JSON.parse(e.value).map((function(e){return"".concat(e.rowValue[0].value,"--").concat(e.rowValue[1].value)})):"\u9886\u7528\u8be6\u60c5"===e.name&&(a.detail=e.value)})),n.push(a),t.formComponentValues=n})),a.setState({items:t,isLoaded:!0})})).catch((function(e){alert(JSON.stringify(e))}))},a.onFinish=function(e){console.log(e.add);var t=[];e.add.map((function(e){t.push({textForms:[{name:"\u7269\u54c1\u540d\u79f0",value:e.name},{name:"\u6570\u91cf",value:e.count}],name:"\u7269\u54c1\u660e\u7ec6"})}));var n=[{name:"\u7269\u54c1\u7528\u9014",value:e.purpose},{name:"\u9886\u7528\u8be6\u60c5",value:e.detail}];a.goodsCollectionAndApprove(t,n),console.log("Success:",e)},a.columns=[{title:"\u7269\u54c1\u7528\u9014",dataIndex:"purpose",key:"purpose"},{title:"\u7269\u54c1\u660e\u7ec6",dataIndex:"more",key:"more",render:function(e){return console.log(e,"====="),e.map((function(e){return Object(I.jsx)("p",{children:e})}))}},{title:"\u9886\u7528\u8be6\u60c5",dataIndex:"detail",key:"detail"}],a.state={items:[],isLoaded:!1,auditList:!1},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(I.jsxs)("div",{style:{padding:"20px"},children:[!this.state.auditList&&Object(I.jsxs)(h.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(I.jsx)(h.a.Item,{label:"\u7269\u54c1\u7528\u9014",name:"purpose",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7269\u54c1\u7528\u9014!"}],children:Object(I.jsx)(f.a,{placeholder:"\u5982\uff1a\u65e5\u5e38\u529e\u516c"})}),Object(I.jsx)(h.a.List,{name:"add",initialValue:[{}],children:function(e,t){var n=t.add,a=t.remove;return Object(I.jsxs)(I.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name;e.fieldKey,Object(d.a)(e,y);return Object(I.jsxs)(b.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(I.jsx)(h.a.Item,{label:"\u7269\u54c1\u540d\u79f0",name:[n,"name"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7269\u54c1\u540d\u79f0!"}],children:Object(I.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u7269\u54c1\u540d\u79f0"})}),Object(I.jsx)(h.a.Item,{label:"\u6570\u91cf",name:[n,"count"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6570\u91cf!"}],children:Object(I.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"})}),Object(I.jsx)(x.a,{onClick:function(){return a(n)}})]},t)})),Object(I.jsx)(h.a.Item,{children:Object(I.jsx)(g.a,{type:"dashed",onClick:function(){return n(1)},block:!0,icon:Object(I.jsx)(v.a,{}),children:"\u589e\u52a0\u7269\u54c1\u660e\u7ec6"})})]})}}),Object(I.jsx)(h.a.Item,{label:"\u9886\u7528\u8be6\u60c5",name:"detail",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7269\u54c1\u96f6\u7528\u8be6\u60c5\u8bf4\u660e!"}],children:Object(I.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u7269\u54c1\u96f6\u7528\u8be6\u60c5\u8bf4\u660e"})}),Object(I.jsx)(h.a.Item,{wrapperCol:{offset:8,span:16},children:Object(I.jsx)(g.a,{type:"primary",htmlType:"submit",children:"\u9886\u7528\u5e76\u63d0\u4ea4\u5ba1\u6279"})})]}),Object(I.jsx)("a",{onClick:function(){e.setState({auditList:!e.state.auditList}),e.getTableRowData()},children:this.state.auditList?"\u63d0\u4ea4\u7533\u9886\u5ba1\u6279":"\u67e5\u770b\u5ba1\u6279\u8bb0\u5f55"}),this.state.auditList&&Object(I.jsx)(O.a,{columns:this.columns,dataSource:this.state.items.formComponentValues})]})}}]),n}(s.a.Component),F="";l.ready((function(){var e;fetch(F+"/config").then((function(e){return e.json()})).then((function(t){e=t.data.corpId,l.runtime.permission.requestAuthCode({corpId:e,onSuccess:function(e){c.a.get(F+"/login?authCode="+e.code).then((function(e){sessionStorage.setItem("userId",e.data.data.userid),sessionStorage.setItem("deptId",e.data.data.deptIdList[0])})).catch((function(e){alert(JSON.stringify(e))}))},onFail:function(e){alert(JSON.stringify(e))}})}))}));var S=function(){return Object(I.jsx)("div",{className:"App",children:Object(I.jsx)("div",{className:"container",children:Object(I.jsx)(C,{})})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,471)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(S,{})}),document.getElementById("root")),k()}},[[461,1,2]]]);
//# sourceMappingURL=main.79284fc3.chunk.js.map